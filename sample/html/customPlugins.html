<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="https://github.com/JiHong88" />
    <meta name="keywords" content="wysiwyg,editor,javascript,suneditor,wysiwyg eidtor,rich text editor,html editor,contenteditable,위지위그 에디터 웹에디터">
    <meta name="description" content="Pure javascript wysiwyg web editor" />
    <title>SunEditor</title>
    <!-- sample css -->
    <link rel="stylesheet" href="../css/bootstrap.css" media="all">
    <link rel="stylesheet" href="../css/sample.css" media="all">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css">
    <style>
        .__se__format__range_custom {
            border: 5px solid #f4b124;
            background-color: #f4b12433;
            padding: 1rem !important;
            margin: 0 0 10px !important;
        }

        .se-custom-tag {
            background-color: #f4b124;
            color: #fff;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" aria-expanded="false" onclick="buttonToggle()">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../index.html" title="Suneditor"><b>SunEditor</b></a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="getting-started.html" title="Getting started">Getting started</a></li>
                <li><a href="examples.html" title="Examples">Examples</a></li>
                <li><a href="options.html" title="Options">Options</a></li>
                <li><a href="customPlugins.html" style="color:#fff;" title="CustomPlugins">CustomPlugins</a></li>
                <li><a href="document.html" title="Document">Document</a></li>
                <li class="badge">
                    <a href="https://www.producthunt.com/posts/suneditor?utm_source=badge-featured&utm_medium=badge&utm_souce=badge-suneditor" target="_blank"><img src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=160149&theme=light" alt="SunEditor - Pure javascript based WYSIWYG editor, with no dependencies | Product Hunt Embed" style="width: 114px; height: auto;"/></a>
                    <a href="https://github.com/JiHong88/SunEditor" target="_blank"><img alt="GitHub stars" src="https://img.shields.io/github/stars/jihong88/suneditor.svg?style=social"></a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="content">
    <article class="markdown-body entry-content">
        <!-- command -->
        <a id="command" href="#command"><h4 class="sub-title">1. Command</h4></a>
        <textarea id="ex_command" style="width: 1080px; height: 150px;"></textarea>
        <br>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// ex) A command plugin to add "Range format element(util.isRangeFormatElement)" to selection</span>
<span class="pl-k">var</span> <span class="pl-s1">plugin_command</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c">// <span class="pl-k">@Required</span></span>
    <span class="pl-c">// plugin name</span>
    <span class="pl-c1">name</span>: <span class="pl-s">'custom_plugin_command'</span><span class="pl-kos">,</span>
    <span class="pl-c">// <span class="pl-k">@Required</span></span>
    <span class="pl-c">// data display</span>
    <span class="pl-c1">display</span>: <span class="pl-s">'command'</span><span class="pl-kos">,</span>

    <span class="pl-c">// <span class="pl-k">@Required</span></span>
    <span class="pl-c">// add function - It is called only once when the plugin is first run.</span>
    <span class="pl-c">// This function generates HTML to append and register the event.</span>
    <span class="pl-c">// arguments - (core : core object, targetElement : clicked button element)</span>
    <span class="pl-en">add</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-s1">core</span><span class="pl-kos">,</span> <span class="pl-s1">targetElement</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">const</span> <span class="pl-s1">context</span> <span class="pl-c1">=</span> <span class="pl-s1">core</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">;</span>
        <span class="pl-k">const</span> <span class="pl-s1">rangeTag</span> <span class="pl-c1">=</span> <span class="pl-s1">core</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">createElement</span><span class="pl-kos">(</span><span class="pl-s">'div'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-s1">core</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">addClass</span><span class="pl-kos">(</span><span class="pl-s1">rangeTag</span><span class="pl-kos">,</span> <span class="pl-s">'__se__format__range_custom'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

        <span class="pl-s1">context</span><span class="pl-kos">.</span><span class="pl-c1">customCommand</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
            <span class="pl-c1">targetButton</span>: <span class="pl-s1">targetElement</span><span class="pl-kos">,</span>
            <span class="pl-c1">tag</span>: <span class="pl-s1">rangeTag</span>
        <span class="pl-kos">}</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>

    <span class="pl-c">// <span class="pl-k">@Overriding</span></span>
    <span class="pl-c">// Plugins with active methods load immediately when the editor loads.</span>
    <span class="pl-c">// Called each time the selection is moved.</span>
    <span class="pl-en">active</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-s1">element</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">if</span> <span class="pl-kos">(</span>!<span class="pl-s1">element</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">removeClass</span><span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customCommand</span><span class="pl-kos">.</span><span class="pl-c1">targetButton</span><span class="pl-kos">,</span> <span class="pl-s">'active'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">hasClass</span><span class="pl-kos">(</span><span class="pl-s1">element</span><span class="pl-kos">,</span> <span class="pl-s">'__se__format__range_custom'</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">addClass</span><span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customCommand</span><span class="pl-kos">.</span><span class="pl-c1">targetButton</span><span class="pl-kos">,</span> <span class="pl-s">'active'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-k">return</span> <span class="pl-c1">true</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span>

        <span class="pl-k">return</span> <span class="pl-c1">false</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>

    <span class="pl-c">// <span class="pl-k">@Required</span></span>
    <span class="pl-c">// The behavior of the "command plugin" must be defined in the "action" method.</span>
    <span class="pl-en">action</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">const</span> <span class="pl-s1">rangeTag</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">getRangeFormatElement</span><span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">getSelectionNode</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

        <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">hasClass</span><span class="pl-kos">(</span><span class="pl-s1">rangeTag</span><span class="pl-kos">,</span> <span class="pl-s">'__se__format__range_custom'</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">detachRangeFormatElement</span><span class="pl-kos">(</span><span class="pl-s1">rangeTag</span><span class="pl-kos">,</span> null<span class="pl-kos">,</span> null<span class="pl-kos">,</span> <span class="pl-c1">false</span><span class="pl-kos">,</span> <span class="pl-c1">false</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">applyRangeFormatElement</span><span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customCommand</span><span class="pl-kos">.</span><span class="pl-c1">tag</span><span class="pl-kos">.</span><span class="pl-en">cloneNode</span><span class="pl-kos">(</span><span class="pl-c1">false</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>

<div class="highlight highlight-source-js"><pre><span class="pl-c1">SUNEDITOR</span><span class="pl-kos">.</span><span class="pl-en">create</span><span class="pl-kos">(</span><span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">getElementById</span><span class="pl-kos">(</span><span class="pl-s">'ex_command'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
    <span class="pl-c1">plugins</span>: <span class="pl-kos">[</span><span class="pl-s1">plugin_command</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-c1">buttonList</span>: <span class="pl-kos">[</span>
        <span class="pl-kos">[</span>
            <span class="pl-kos">{</span>
                <span class="pl-c1">name</span>: <span class="pl-s">'custom_plugin_command'</span><span class="pl-kos">,</span> 
                <span class="pl-c1">dataCommand</span>: <span class="pl-s">'custom_plugin_command'</span><span class="pl-kos">,</span>
                <span class="pl-c1">buttonClass</span>:<span class="pl-s">''</span><span class="pl-kos">,</span> 
                <span class="pl-c1">title</span>:<span class="pl-s">'Custom plugin of the comand'</span><span class="pl-kos">,</span> 
                <span class="pl-c1">dataDisplay</span>:<span class="pl-s">'command'</span><span class="pl-kos">,</span>
                <span class="pl-c1">innerHTML</span>:<span class="pl-s">'&lt;i class="se-icon-add"&gt;&lt;/i&gt;'</span>
            <span class="pl-kos">}</span>
        <span class="pl-kos">]</span>
    <span class="pl-kos">]</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>


        <!-- submenu -->
        <a id="submenu" href="#submenu"><h4 class="sub-title">2. Submenu</h4></a>
        <textarea id="ex_submenu" style="width: 1080px; height: 150px;"></textarea>
        <br>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// ex) A submenu plugin that appends the contents of the input element to the editor</span>
<span class="pl-k">var</span> <span class="pl-s1">plugin_submenu</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c">// <span class="pl-k">@Required</span></span>
    <span class="pl-c">// plugin name</span>
    <span class="pl-c1">name</span>: <span class="pl-s">'custom_plugin_submenu'</span><span class="pl-kos">,</span>

    <span class="pl-c">// <span class="pl-k">@Required</span></span>
    <span class="pl-c">// data display</span>
    <span class="pl-c1">display</span>: <span class="pl-s">'submenu'</span><span class="pl-kos">,</span>

    <span class="pl-c">// <span class="pl-k">@Required</span></span>
    <span class="pl-c">// add function - It is called only once when the plugin is first run.</span>
    <span class="pl-c">// This function generates HTML to append and register the event.</span>
    <span class="pl-c">// arguments - (core : core object, targetElement : clicked button element)</span>
    <span class="pl-en">add</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-s1">core</span><span class="pl-kos">,</span> <span class="pl-s1">targetElement</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

        <span class="pl-c">// Registering a namespace for caching as a plugin name in the context object</span>
        <span class="pl-k">const</span> <span class="pl-s1">context</span> <span class="pl-c1">=</span> <span class="pl-s1">core</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">;</span>
        <span class="pl-s1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
            <span class="pl-c1">targetButton</span>: <span class="pl-s1">targetElement</span><span class="pl-kos">,</span>
            <span class="pl-c1">textElement</span>: null<span class="pl-kos">,</span>
            <span class="pl-c1">currentSpan</span>: null
        <span class="pl-kos">}</span><span class="pl-kos">;</span>

        <span class="pl-c">// Generate submenu HTML</span>
        <span class="pl-c">// Always bind "core" when calling a plugin function</span>
        <span class="pl-k">let</span> <span class="pl-s1">listDiv</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">setSubmenu</span><span class="pl-kos">.</span><span class="pl-en">call</span><span class="pl-kos">(</span><span class="pl-s1">core</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

        <span class="pl-c">// Input tag caching</span>
        <span class="pl-s1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">textElement</span> <span class="pl-c1">=</span> <span class="pl-s1">listDiv</span><span class="pl-kos">.</span><span class="pl-en">querySelector</span><span class="pl-kos">(</span><span class="pl-s">'input'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

        <span class="pl-c">// You must bind "core" object when registering an event.</span>
        <span class="pl-c">/** add event listeners */</span>
        <span class="pl-s1">listDiv</span><span class="pl-kos">.</span><span class="pl-en">querySelector</span><span class="pl-kos">(</span><span class="pl-s">'.se-btn-primary'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">addEventListener</span><span class="pl-kos">(</span><span class="pl-s">'click'</span><span class="pl-kos">,</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">onClick</span><span class="pl-kos">.</span><span class="pl-en">bind</span><span class="pl-kos">(</span><span class="pl-s1">core</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-s1">listDiv</span><span class="pl-kos">.</span><span class="pl-en">querySelector</span><span class="pl-kos">(</span><span class="pl-s">'.se-btn'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">addEventListener</span><span class="pl-kos">(</span><span class="pl-s">'click'</span><span class="pl-kos">,</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">onClickRemove</span><span class="pl-kos">.</span><span class="pl-en">bind</span><span class="pl-kos">(</span><span class="pl-s1">core</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

        <span class="pl-c">/** append html */</span>
        <span class="pl-s1">targetElement</span><span class="pl-kos">.</span><span class="pl-c1">parentNode</span><span class="pl-kos">.</span><span class="pl-en">appendChild</span><span class="pl-kos">(</span><span class="pl-s1">listDiv</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>

    <span class="pl-en">setSubmenu</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">const</span> <span class="pl-s1">listDiv</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">createElement</span><span class="pl-kos">(</span><span class="pl-s">'DIV'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

        <span class="pl-s1">listDiv</span><span class="pl-kos">.</span><span class="pl-c1">className</span> <span class="pl-c1">=</span> <span class="pl-s">'se-submenu se-list-layer'</span><span class="pl-kos">;</span>
        <span class="pl-s1">listDiv</span><span class="pl-kos">.</span><span class="pl-c1">innerHTML</span> <span class="pl-c1">=</span> <span class="pl-s">''</span> <span class="pl-c1">+</span>
            <span class="pl-s">'&lt;div class="se-list-inner"&gt;'</span> <span class="pl-c1">+</span>
                <span class="pl-s">'&lt;ul class="se-list-basic" style="width: 230px;"&gt;'</span> <span class="pl-c1">+</span>
                    <span class="pl-s">'&lt;li&gt;'</span> <span class="pl-c1">+</span>
                        <span class="pl-s">'&lt;div class="se-submenu-form-group"&gt;'</span> <span class="pl-c1">+</span>
                            <span class="pl-s">'&lt;input class="se-input-form" type="text" placeholder="insert text" style="border: 1px solid #CCC;" /&gt;'</span> <span class="pl-c1">+</span>
                            <span class="pl-s">'&lt;button type="button" class="se-btn-primary se-tooltip"&gt;'</span> <span class="pl-c1">+</span>
                                <span class="pl-s">'&lt;strong&gt;OK&lt;/strong&gt;'</span> <span class="pl-c1">+</span>
                                <span class="pl-s">'&lt;span class="se-tooltip-inner"&gt;'</span> <span class="pl-c1">+</span>
                                    <span class="pl-s">'&lt;span class="se-tooltip-text"&gt;Append span&lt;/span&gt;'</span> <span class="pl-c1">+</span>
                                <span class="pl-s">'&lt;/span&gt;'</span> <span class="pl-c1">+</span>
                            <span class="pl-s">'&lt;/button&gt;'</span> <span class="pl-c1">+</span>
                            <span class="pl-s">'&lt;button type="button" class="se-btn se-tooltip"&gt;'</span> <span class="pl-c1">+</span>
                                <span class="pl-s">'&lt;strong&gt;X&lt;/strong&gt;'</span> <span class="pl-c1">+</span>
                                <span class="pl-s">'&lt;span class="se-tooltip-inner"&gt;'</span> <span class="pl-c1">+</span>
                                    <span class="pl-s">'&lt;span class="se-tooltip-text"&gt;Remove&lt;/span&gt;'</span> <span class="pl-c1">+</span>
                                <span class="pl-s">'&lt;/span&gt;'</span> <span class="pl-c1">+</span>
                            <span class="pl-s">'&lt;/button&gt;'</span> <span class="pl-c1">+</span>
                        <span class="pl-s">'&lt;/div&gt;'</span> <span class="pl-c1">+</span>
                    <span class="pl-s">'&lt;/li&gt;'</span> <span class="pl-c1">+</span>
                <span class="pl-s">'&lt;/ul&gt;'</span> <span class="pl-c1">+</span>
            <span class="pl-s">'&lt;/div&gt;'</span><span class="pl-kos">;</span>

        <span class="pl-k">return</span> <span class="pl-s1">listDiv</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>

    <span class="pl-c">// <span class="pl-k">@Overriding</span></span>
    <span class="pl-c">// Plugins with active methods load immediately when the editor loads.</span>
    <span class="pl-c">// Called each time the selection is moved.</span>
    <span class="pl-en">active</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-s1">element</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-c">// If no tag matches, the "element" argument is called with a null value.</span>
        <span class="pl-k">if</span> <span class="pl-kos">(</span>!<span class="pl-s1">element</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">removeClass</span><span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">targetButton</span><span class="pl-kos">,</span> <span class="pl-s">'active'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">textElement</span><span class="pl-kos">.</span><span class="pl-c1">value</span> <span class="pl-c1">=</span> <span class="pl-s">''</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">currentSpan</span> <span class="pl-c1">=</span> null<span class="pl-kos">;</span>
        <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">hasClass</span><span class="pl-kos">(</span><span class="pl-s1">element</span><span class="pl-kos">,</span> <span class="pl-s">'se-custom-tag'</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">addClass</span><span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">targetButton</span><span class="pl-kos">,</span> <span class="pl-s">'active'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">textElement</span><span class="pl-kos">.</span><span class="pl-c1">value</span> <span class="pl-c1">=</span> <span class="pl-s1">element</span><span class="pl-kos">.</span><span class="pl-c1">textContent</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">currentSpan</span> <span class="pl-c1">=</span> <span class="pl-s1">element</span><span class="pl-kos">;</span>
            <span class="pl-k">return</span> <span class="pl-c1">true</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span>

        <span class="pl-k">return</span> <span class="pl-c1">false</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>

    <span class="pl-c">// <span class="pl-k">@Overriding</span></span>
    <span class="pl-c">// Called after the submenu has been rendered</span>
    <span class="pl-en">on</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">textElement</span><span class="pl-kos">.</span><span class="pl-en">focus</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>

    <span class="pl-en">onClickRemove</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">const</span> <span class="pl-s1">span</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">currentSpan</span><span class="pl-kos">;</span>
        <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">span</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">removeItem</span><span class="pl-kos">(</span><span class="pl-s1">span</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">currentSpan</span> <span class="pl-c1">=</span> null<span class="pl-kos">;</span>

            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">submenuOff</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">focus</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>

    <span class="pl-en">onClick</span>: <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">const</span> <span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">textElement</span><span class="pl-kos">.</span><span class="pl-c1">value</span><span class="pl-kos">.</span><span class="pl-en">trim</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-k">if</span> <span class="pl-kos">(</span>!<span class="pl-s1">value</span><span class="pl-kos">)</span> <span class="pl-k">return</span><span class="pl-kos">;</span>

        <span class="pl-k">const</span> <span class="pl-s1">span</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">currentSpan</span><span class="pl-kos">;</span>
        <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">span</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-s1">span</span><span class="pl-kos">.</span><span class="pl-c1">textContent</span> <span class="pl-c1">=</span> <span class="pl-s1">value</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">setRange</span><span class="pl-kos">(</span><span class="pl-s1">span</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-s1">span</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
            <span class="pl-k">const</span> <span class="pl-s1">node</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">createElement</span><span class="pl-kos">(</span><span class="pl-s">'span'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">addClass</span><span class="pl-kos">(</span><span class="pl-s1">node</span><span class="pl-kos">,</span> <span class="pl-s">'se-custom-tag'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-s1">node</span><span class="pl-kos">.</span><span class="pl-c1">textContent</span> <span class="pl-c1">=</span> <span class="pl-s1">value</span><span class="pl-kos">;</span>
            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">context</span><span class="pl-kos">.</span><span class="pl-c1">customSubmenu</span><span class="pl-kos">.</span><span class="pl-c1">textElement</span><span class="pl-kos">.</span><span class="pl-c1">value</span> <span class="pl-c1">=</span> <span class="pl-s">''</span><span class="pl-kos">;</span>


            <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">insertNode</span><span class="pl-kos">(</span><span class="pl-s1">node</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-k">const</span> <span class="pl-s1">zeroWidthSpace</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-en">createTextNode</span><span class="pl-kos">(</span><span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">util</span><span class="pl-kos">.</span><span class="pl-c1">zeroWidthSpace</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-s1">node</span><span class="pl-kos">.</span><span class="pl-c1">parentNode</span><span class="pl-kos">.</span><span class="pl-en">insertBefore</span><span class="pl-kos">(</span><span class="pl-s1">zeroWidthSpace</span><span class="pl-kos">,</span> <span class="pl-s1">node</span><span class="pl-kos">.</span><span class="pl-c1">nextSibling</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

            <span class="pl-c">// this.setRange(zeroWidthSpace, 1, zeroWidthSpace, 1);</span>
        <span class="pl-kos">}</span>

        <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">submenuOff</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div>

<div class="highlight highlight-source-js"><pre><span class="pl-c1">SUNEDITOR</span><span class="pl-kos">.</span><span class="pl-en">create</span><span class="pl-kos">(</span><span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">getElementById</span><span class="pl-kos">(</span><span class="pl-s">'ex_submenu'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
    <span class="pl-c1">plugins</span>: <span class="pl-kos">[</span><span class="pl-s1">plugin_submenu</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-c1">buttonList</span>: <span class="pl-kos">[</span>
        <span class="pl-kos">[</span>
            <span class="pl-kos">{</span>
                <span class="pl-c1">name</span>: <span class="pl-s">'custom_plugin_submenu'</span><span class="pl-kos">,</span> 
                <span class="pl-c1">dataCommand</span>: <span class="pl-s">'custom_plugin_submenu'</span><span class="pl-kos">,</span>
                <span class="pl-c1">buttonClass</span>:<span class="pl-s">''</span><span class="pl-kos">,</span> 
                <span class="pl-c1">title</span>:<span class="pl-s">'Custom plugin of the submenu'</span><span class="pl-kos">,</span> 
                <span class="pl-c1">dataDisplay</span>:<span class="pl-s">'submenu'</span><span class="pl-kos">,</span>
                <span class="pl-c1">innerHTML</span>:<span class="pl-s">'&lt;i class="se-icon-add"&gt;&lt;/i&gt;'</span>
            <span class="pl-kos">}</span>
        <span class="pl-kos">]</span>
    <span class="pl-kos">]</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>


        <!-- dialog -->
        <a id="dialog" href="#dialog"><h4 class="sub-title">3. Dialog</h4></a>
        <textarea id="ex_dialog" style="width: 1080px; height: 150px;"></textarea>
        <br>
    </article>

    <footer>
        <p>SunEditor distributed under the MIT license.</p>
        <p><a href="https://github.com/JiHong88/SunEditor" target="_blank" style="color:#f4b124;">Go to GitHub SunEditor</a></p>
    </footer>
</div>

<script src="../js/common.js"></script>
<!-- suneditor -->
<link href="../../dist/css/suneditor.min.css" rel="stylesheet">
<script src="../../dist/suneditor.min.js"></script>
<script>
    // ex) A command plugin to add "Range format element(util.isRangeFormatElement)" to selection
    var plugin_command = {
        // @Required
        // plugin name
        name: 'custom_plugin_command',
        // @Required
        // data display
        display: 'command',

        // @Required
        // add function - It is called only once when the plugin is first run.
        // This function generates HTML to append and register the event.
        // arguments - (core : core object, targetElement : clicked button element)
        add: function (core, targetElement) {
            const context = core.context;
            const rangeTag = core.util.createElement('div');
            core.util.addClass(rangeTag, '__se__format__range_custom');

            context.customCommand = {
                targetButton: targetElement,
                tag: rangeTag
            };
        },

        // @Overriding
        // Plugins with active methods load immediately when the editor loads.
        // Called each time the selection is moved.
        active: function (element) {
            if (!element) {
                this.util.removeClass(this.context.customCommand.targetButton, 'active');
            } else if (this.util.hasClass(element, '__se__format__range_custom')) {
                this.util.addClass(this.context.customCommand.targetButton, 'active');
                return true;
            }
            
            return false;
        },

        // @Required
        // The behavior of the "command plugin" must be defined in the "action" method.
        action: function () {
            const rangeTag = this.util.getRangeFormatElement(this.getSelectionNode());

            if (this.util.hasClass(rangeTag, '__se__format__range_custom')) {
                this.detachRangeFormatElement(rangeTag, null, null, false, false);
            } else {
                this.applyRangeFormatElement(this.context.customCommand.tag.cloneNode(false));
            }
        }
    }


    // ex) A submenu plugin that appends the contents of the input element to the editor
    var plugin_submenu = {
        // @Required
        // plugin name
        name: 'custom_plugin_submenu',

        // @Required
        // data display
        display: 'submenu',

        // @Required
        // add function - It is called only once when the plugin is first run.
        // This function generates HTML to append and register the event.
        // arguments - (core : core object, targetElement : clicked button element)
        add: function (core, targetElement) {

            // Registering a namespace for caching as a plugin name in the context object
            const context = core.context;
            context.customSubmenu = {
                targetButton: targetElement,
                textElement: null,
                currentSpan: null
            };

            // Generate submenu HTML
            // Always bind "core" when calling a plugin function
            let listDiv = this.setSubmenu.call(core);

            // Input tag caching
            context.customSubmenu.textElement = listDiv.querySelector('input');

            // You must bind "core" object when registering an event.
            /** add event listeners */
            listDiv.querySelector('.se-btn-primary').addEventListener('click', this.onClick.bind(core));
            listDiv.querySelector('.se-btn').addEventListener('click', this.onClickRemove.bind(core));

            /** append html */
            targetElement.parentNode.appendChild(listDiv);
        },

        setSubmenu: function () {
            const listDiv = this.util.createElement('DIV');

            listDiv.className = 'se-submenu se-list-layer';
            listDiv.innerHTML = '' +
                '<div class="se-list-inner">' +
                    '<ul class="se-list-basic" style="width: 230px;">' +
                        '<li>' +
                            '<div class="se-submenu-form-group">' +
                                '<input class="se-input-form" type="text" placeholder="insert text" style="border: 1px solid #CCC;" />' +
                                '<button type="button" class="se-btn-primary se-tooltip">' +
                                    '<strong>OK</strong>' +
                                    '<span class="se-tooltip-inner">' +
                                        '<span class="se-tooltip-text">Append span</span>' +
                                    '</span>' +
                                '</button>' +
                                '<button type="button" class="se-btn se-tooltip">' +
                                    '<strong>X</strong>' +
                                    '<span class="se-tooltip-inner">' +
                                        '<span class="se-tooltip-text">Remove</span>' +
                                    '</span>' +
                                '</button>' +
                            '</div>' +
                        '</li>' +
                    '</ul>' +
                '</div>';

            return listDiv;
        },

        // @Overriding
        // Plugins with active methods load immediately when the editor loads.
        // Called each time the selection is moved.
        active: function (element) {
            // If no tag matches, the "element" argument is called with a null value.
            if (!element) {
                this.util.removeClass(this.context.customSubmenu.targetButton, 'active');
                this.context.customSubmenu.textElement.value = '';
                this.context.customSubmenu.currentSpan = null;
            } else if (this.util.hasClass(element, 'se-custom-tag')) {
                this.util.addClass(this.context.customSubmenu.targetButton, 'active');
                this.context.customSubmenu.textElement.value = element.textContent;
                this.context.customSubmenu.currentSpan = element;
                return true;
            }
            
            return false;
        },

        // @Overriding
        // Called after the submenu has been rendered
        on: function () {
            this.context.customSubmenu.textElement.focus();
        },

        onClickRemove: function () {
            const span = this.context.customSubmenu.currentSpan;
            if (span) {
                this.util.removeItem(span);
                this.context.customSubmenu.currentSpan = null;

                this.submenuOff();
                this.focus();
            }
        },

        onClick: function () {
            const value = this.context.customSubmenu.textElement.value.trim();
            if (!value) return;

            const span = this.context.customSubmenu.currentSpan;
            if (span) {
                span.textContent = value;
                this.setRange(span, 1, span, 1);
            } else {
                const node = this.util.createElement('span');
                this.util.addClass(node, 'se-custom-tag');
                node.textContent = value;
                this.context.customSubmenu.textElement.value = '';
    
                
                this.insertNode(node);
                const zeroWidthSpace = this.util.createTextNode(this.util.zeroWidthSpace);
                node.parentNode.insertBefore(zeroWidthSpace, node.nextSibling);
                
                // this.setRange(zeroWidthSpace, 1, zeroWidthSpace, 1);
            }

            this.submenuOff();
        }
    };

    var plugin_dialog = {
        
    };

    SUNEDITOR.create(document.getElementById('ex_command'), {
        plugins: [plugin_command],
        buttonList: [
            [
                {
                    name: 'custom_plugin_command', 
                    dataCommand: 'custom_plugin_command',
                    buttonClass:'', 
                    title:'Custom plugin of the comand', 
                    dataDisplay:'command',
                    innerHTML:'<i class="se-icon-add"></i>'
                }
            ]
        ]
    });

    SUNEDITOR.create(document.getElementById('ex_submenu'), {
        plugins: [plugin_submenu],
        buttonList: [
            [
                {
                    name: 'custom_plugin_submenu', 
                    dataCommand: 'custom_plugin_submenu',
                    buttonClass:'', 
                    title:'Custom plugin of the submenu', 
                    dataDisplay:'submenu',
                    innerHTML:'<i class="se-icon-add"></i>'
                }
            ]
        ]
    });

    SUNEDITOR.create(document.getElementById('ex_dialog'), {
        plugins: [plugin_dialog],
        buttonList: [
            [
                {
                    name: 'custom_plugin_dialog', 
                    dataCommand: 'custom_plugin_dialog',
                    buttonClass:'', 
                    title:'Custom plugin of the dialog', 
                    dataDisplay:'dialog',
                    innerHTML:'<i class="se-icon-add"></i>'
                }
            ]
        ]
    });
</script>
</body>
</html>