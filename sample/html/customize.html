<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="https://github.com/JiHong88" />
    <meta name="keywords" content="wysiwyg,editor,javascript,suneditor,wysiwyg eidtor,rich text editor,html editor,contenteditable,위지위그 에디터 웹에디터">
    <meta name="description" content="Pure javascript wysiwyg web editor" />
    <title>SunEditor</title>
    <!-- sample css -->
    <link rel="stylesheet" href="../css/bootstrap.css" media="all">
    <link rel="stylesheet" href="../css/sample.css" media="all">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css">
    <!-- suneditor -->
    <link href="../../dist/css/suneditor.min.css" rel="stylesheet" type="text/css">
</head>
<body>
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" aria-expanded="false" onclick="buttonToggle()">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../index.html" title="Suneditor"><b>SunEditor</b></a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="getting-started.html" title="Getting started">Getting started</a></li>
                <li><a href="examples.html" title="Examples">Examples</a></li>
                <li><a href="customize.html" style="color:#fff;" title="Customize">Customize</a></li>
                <li><a href="customPlugins.html" title="CustomPlugins">CustomPlugins</a></li>
                <li><a href="document.html" title="Document">Document</a></li>
                <li class="badge">
                    <a href="https://www.producthunt.com/posts/suneditor?utm_source=badge-featured&utm_medium=badge&utm_souce=badge-suneditor" target="_blank"><img src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=160149&theme=light" alt="SunEditor - Pure javascript based WYSIWYG editor, with no dependencies | Product Hunt Embed" style="width: 114px; height: auto;"/></a>
                    <a href="https://github.com/JiHong88/SunEditor" target="_blank"><img alt="GitHub stars" src="https://img.shields.io/github/stars/jihong88/suneditor.svg?style=social"></a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="content">
    <article class="markdown-body entry-content">
        <div style="background-color: #f3f3f3; padding: 20px; user-select: none;">
            <label>mode : &nbsp;&nbsp;</label>
            <label>Classic&nbsp;&nbsp;<input type="radio" value="classic" name="mode" checked></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label>Balloon&nbsp;&nbsp;<input type="radio" value="balloon" name="mode"></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label>Inline&nbsp;&nbsp;<input type="radio" value="inline" name="mode"></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label>Language&nbsp;&nbsp;</label>
            <select id="language">
                <option value="da">da</option>
                <option value="de">de</option>
                <option value="en" selected>en</option>
                <option value="fr">fr</option>
                <option value="ja">ja</option>
                <option value="ko">ko</option>
                <option value="ru">ru</option>
                <option value="zh_cn">zh_cn</option>
            </select>
            <br><br>

            <label><input type="checkbox" id="toolbarWidth">&nbsp;&nbsp;toolbarWidth</label>
            <input type="text" id="toolbarWidth_value" placeholder="Number, ...px, ...%">
            <br><br>

            <label><input type="checkbox" id="stickyToolbar">&nbsp;&nbsp;stickyToolbar</label>
            <input type="text" id="stickyToolbar_value" placeholder="Number, ...px">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="popupDisplay">&nbsp;&nbsp;popupDisplay</label>
            <input type="text" id="popupDisplay_value" placeholder="full, local">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <br><br>

            <label><input type="checkbox" id="resizingBar">&nbsp;&nbsp;resizingBar</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="showPathLabel">&nbsp;&nbsp;showPathLabel</label>
            <br><br>

            <label><input type="checkbox" id="display">&nbsp;&nbsp;display</label>
            <input type="text" id="display_value" placeholder="block, inline, etc.">
            <br><br>

            <label><input type="checkbox" id="width">&nbsp;&nbsp;width</label>
            <input type="text" id="width_value" placeholder="Number, ...px, ...%">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="height">&nbsp;&nbsp;height</label>
            <input type="text" id="height_value" placeholder="auto, Number, ...px, ...%" style="width: 200px">
            <br><br>

            <label><input type="checkbox" id="minHeight">&nbsp;&nbsp;minHeight</label>
            <input type="text" id="minHeight_value" placeholder="Number, ...px">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="maxHeight">&nbsp;&nbsp;maxHeight</label>
            <input type="text" id="maxHeight_value" placeholder="Number, ...px">
            <br><br>

            <label><input type="checkbox" id="font">&nbsp;&nbsp;font</label>
            <span>[ 'Arial', 'tahoma', 'Courier New,Courier' ]</span>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="fontSize">&nbsp;&nbsp;fontSize</label>
            <span>[ 8, 10, 14, 18, 24, 36 ]</span>
            <br><br>
            
            <label><input type="checkbox" id="colorList">&nbsp;&nbsp;colorList</label>
            <span>[ '#ff0000', '#ff5e00', '#ffe400', '#abf200', '#00d8ff', '#0055ff', '#6600ff', '#ff00dd', '#000000' ]</span>
            <br><br>

            <label><input type="checkbox" id="imageResizing">&nbsp;&nbsp;imageResizing</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="imageFileInput" checked>&nbsp;&nbsp;imageFileInput</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="imageUrlInput" checked>&nbsp;&nbsp;imageUrlInput</label>
            <br><br>

            <label><input type="checkbox" id="imageWidth">&nbsp;&nbsp;imageWidth</label>
            <input type="text" id="imageWidth_value" placeholder="Number" style="width: 200px">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <br><br>

            <label><input type="checkbox" id="imageUploadHeader">&nbsp;&nbsp;imageUploadHeader</label>
            <textarea id="imageUploadHeader_value" placeholder='{"Access-Control-Allow-Origin": "*"}' style="width: 300px; vertical-align: top;"></textarea>
            <br><br>
            <label><input type="checkbox" id="imageUploadUrl">&nbsp;&nbsp;imageUploadUrl</label>
            <input type="text" id="imageUploadUrl_value" placeholder="Server upload URL" style="width: 200px">
            <br><br>

            <label><input type="checkbox" id="videoResizing">&nbsp;&nbsp;videoResizing</label>
            <br><br>

            <label><input type="checkbox" id="videoWidth">&nbsp;&nbsp;videoWidth</label>
            <input type="text" id="videoWidth_value" placeholder="Number">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="videoHeight">&nbsp;&nbsp;videoHeight</label>
            <input type="text" id="videoHeight_value" placeholder="Number">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <label><input type="checkbox" id="youtubeQuery">&nbsp;&nbsp;youtubeQuery</label>
            <input type="text" id="youtubeQuery_value" placeholder="String">
        </div>
        <br>
        <button type="button" class="btn btn-md btn-default" onclick="sun_create()">Create</button>
        <textarea id="sample_editor" style="display: none;"></textarea>

        <div style="width: 100%; background: #fff;">
            <h5 style="margin: 10px 0 0 10px;">Uploaded image file list</h5>
        </div>
        <div id="image_wrapper" class="image-list" style="display: none;">
            <div class="file-list-info">
                <span>Attached files</span>
                <span id="image_size" class="total-size text-small-2">0KB</span>
                <button class="btn btn-md btn-danger" id="image_remove" disabled onclick="deleteCheckedImages()">Remove</button>
            </div>
            <div class="file-list">
                <ul id="image_list">
                </ul>
            </div>
        </div>
    </article>

    <footer>
        <p>SunEditor distributed under the MIT license.</p>
        <p><a href="https://github.com/JiHong88/SunEditor" target="_blank" style="color:#f4b124;">Go to GitHub SunEditor</a></p>
    </footer>
</div>

<script src="../js/common.js"></script>
<script src="../../dist/suneditor.min.js"></script>
<script src="../../src/lang/da.js"></script>
<script src="../../src/lang/de.js"></script>
<script src="../../src/lang/en.js"></script>
<script src="../../src/lang/fr.js"></script>
<script src="../../src/lang/ja.js"></script>
<script src="../../src/lang/ko.js"></script>
<script src="../../src/lang/ru.js"></script>
<script src="../../src/lang/zh_cn.js"></script>
<script>
const langSelect = document.getElementById('language');
let editor = null;

const imageWrapper = document.getElementById('image_wrapper');
const imageSize = document.getElementById('image_size');
const imageRemove = document.getElementById('image_remove');
const imageTable = document.getElementById('image_list');

let imageList = [];
let selectedImages = [];

function sun_create () {
    if (editor && editor.destroy) editor.destroy();

    imageTable.innerHTML = '';

    editor = SUNEDITOR.create('sample_editor', {
        mode: document.querySelector('input[name="mode"]:checked').value,
        toolbarWidth: document.getElementById('toolbarWidth').checked ? document.getElementById('toolbarWidth_value').value : false,
        stickyToolbar: document.getElementById('stickyToolbar').checked ? document.getElementById('stickyToolbar_value').value : false,
        popupDisplay: document.getElementById('popupDisplay').checked ? document.getElementById('popupDisplay_value').value : null,
        resizingBar: document.getElementById('resizingBar').checked,
        showPathLabel: document.getElementById('showPathLabel').checked,
        display: document.getElementById('display').checked ? document.getElementById('display_value').value : null,
        width: document.getElementById('width').checked ? document.getElementById('width_value').value : null,
        height: document.getElementById('height').checked ? document.getElementById('height_value').value : null,
        minHeight: document.getElementById('minHeight').checked ? document.getElementById('minHeight_value').value : null,
        maxHeight: document.getElementById('maxHeight').checked ? document.getElementById('maxHeight_value').value : null,
        font: !document.getElementById('font').checked ? null : [
            'Arial',
            'tahoma',
            'Courier New,Courier'
        ],
        fontSize: !document.getElementById('fontSize').checked ? null : [
            8, 10, 14, 18, 24, 36
        ],
        colorList: !document.getElementById('colorList').checked ? null : [
            '#ff0000', '#ff5e00', '#ffe400', '#abf200', '#00d8ff', '#0055ff', '#6600ff', '#ff00dd', '#000000'
        ],
        imageResizing: document.getElementById('imageResizing').checked,
        imageFileInput: document.getElementById('imageFileInput').checked,
        imageUrlInput: document.getElementById('imageUrlInput').checked,
        imageWidth: document.getElementById('imageWidth').checked ? document.getElementById('imageWidth_value').value : null,
        imageUploadUrl: document.getElementById('imageUploadHeader').checked ? JSON.parse(document.getElementById('imageUploadHeader_value').value) : null,
        imageUploadUrl: document.getElementById('imageUploadUrl').checked ? document.getElementById('imageUploadUrl_value').value : null,
        videoResizing: document.getElementById('videoResizing').checked,
        videoWidth: document.getElementById('videoWidth').checked ? document.getElementById('videoWidth_value').value : null,
        videoHeight: document.getElementById('videoHeight').checked ? document.getElementById('videoHeight_value').value : null,
        youtubeQuery: document.getElementById('youtubeQuery').checked ? document.getElementById('youtubeQuery_value').value : null,
        buttonList: [
            ['undo', 'redo',
            'font', 'fontSize', 'formatBlock',
            'bold', 'underline', 'italic', 'strike', 'subscript', 'superscript',
            'removeFormat',
            'fontColor', 'hiliteColor',
            'outdent', 'indent',
            'align', 'horizontalRule', 'list', 'table',
            'link', 'image', 'video',
            'fullScreen', 'showBlocks', 'codeView',
            'preview', 'print']
        ],
        lang: SUNEDITOR_LANG[langSelect.options[langSelect.selectedIndex].value]
    });

    editor.onImageUpload = function (targetImgElement, index, isDelete, imageInfo, remainingFilesCount) {
        console.log('imageInfo', imageInfo);

        if (isDelete) {
            imageList.splice(findIndex(imageList, index), 1)
        } else {
            const image = editor.getImagesInfo()[findIndex(editor.getImagesInfo(), index)]
            if (!image) return
            imageList.unshift(image)
        }

        if (remainingFilesCount === 0) {
            console.log('imageList', imageList)
            setImageList(imageList)
        }
    }
}

function setImageList () {
    if (imageList.length > 0) imageWrapper.style.display = 'flex';
    else imageWrapper.style.display = 'none';

    let list = '';
    let size = 0;

    for (let i = 0, image, fixSize; i < imageList.length; i++) {
        image = imageList[i];
        fixSize = (image.size / 1000).toFixed(1) * 1
            
        list += '<li id="img_' + image.index + '">' +
                    '<div onclick="checkImage(' + image.index + ')">' +
                        '<div><img src="' + image.src + '"></div>' +
                    '</div>' +
                    '<a href="javascript:void(0)" onclick="setImage(\'select\',' + image.index + ')" class="image-size">' + fixSize + 'KB</a>' +
                    '<div class="image-check"><svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path></svg></div>' +
                '</li>';
        
        size += fixSize;
    }

    imageSize.innerText = size.toFixed(1) + 'KB';
    imageTable.innerHTML = list;
}

function setImage (type, index) {
    imageList[findIndex(imageList, index)][type]();
}

function checkImage (index) {
    const li = imageTable.querySelector('#img_' + index);
    const currentImageIdx = findIndex(selectedImages, index)

    if (currentImageIdx > -1) {
        selectedImages.splice(currentImageIdx, 1)
        li.className = '';
    } else {
        selectedImages.push(index)
        li.className = 'checked';
    }

    if (selectedImages.length > 0) {
        imageRemove.removeAttribute('disabled');
    } else {
        imageRemove.setAttribute('disabled', true);
    }
}

function deleteCheckedImages() {
    editor.getImagesInfo().forEach(function (el) {
        selectedImages.forEach(function (selected) {
          if (el.index === selected) {
            el.delete()
          }
        })
      })

    selectedImages = []
}

function findIndex(arr, index) {
    let idx = -1;

    arr.some(function (a, i) {
        if ((typeof a === 'number' ? a : a.index) === index) {
            idx = i;
            return true;
        }
        return false;
    })

    return idx;
}

sun_create();
</script>
</body>
</html>